<!DOCTYPE html>
<html>
<head>
	<title>Viewer</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<meta name="description" content="WebRTC Video Broadcast.">
	<meta name="author" content="Brian Mau">
	
</head>
<body><div id"container'>
	<canvas id='canvas' height='240' width='300' hidden><canvas>
	
</div>
<video id="camera" playsinline autoplay muted controls></video>
<script src="/socket.io/socket.io.js"></script>
<script>
	// MODIFY THIS TO THE APPROPRIATE URL IF IT IS NOT BEING RUN LOCALLY
const socket = io.connect(window.location.origin);
socket.on('image', function(image) {
    
	
	var img = new Image();
    img.onload = function() {
		const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const x = 0, y = 0;
        ctx.drawImage(this, x, y);
    }
	img.src = `data:image/jpeg;base64,${image}`
});
const canvas = document.getElementById('canvas');
const video= document.getElementById('camera');
const stream=canvas.captureStream();
video.srcObject=stream;
	</script>
</body>
</html>
