<!DOCTYPE html>
<html>
<head>
	<title>Viewer</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./css/style.css">
	
</head>
<body>
  <p id="status">OpenCV.js is loading...</p>
  <div class="outSide">
    <div class="outsides"><h3 style="font-size:2vw;"> OutSide</h3> </div>
    <div class ="rml"> <img id="data11"></div> 
    <div class ="rml"> <img id="data21"> </div>
    <div class ="rml"> <img id="data12"></div>
  </div>
  <div class="inSide">
    <div class="insides"><h3 style="font-size:2vw;"> InSide</h3> </div>
    <div class ="rml"> <img id="data13"> </div>
    <div class ="rml"> <img id="data22"> </div>
    <div class ="rml"> <img id="data14"> </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
  function onOpenCvReady() {
    document.getElementById('status').innerHTML = 'OpenCV.js is ready.';
      
	const socket = io.connect(window.location.origin);
	
	socket.on('error', data => location.reload());
	
	['data11',
	 'data12',
	 'data13',
	 'data14',
	 'data21',
	 'data22'
	].forEach(cam_code => {
	    socket.on(cam_code, data => {
		  const image_el = document.getElementById(cam_code);
		  image_el.src =`data:image/jpeg;base64,${data}`;
	    });
	  });
  }
  </script>
  <script async src="opencv.js" onload="onOpenCvReady();" type="text/javascript"></script>
</body>
</html>
